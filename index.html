<html>
<head>

<title>Guild Wars 2 Chat Link Converter</title>

<link rel="stylesheet" type="text/css" href="./index.css"/>
<script src="./js/jquery.min.js"></script>

</head>

<body>
<input type="text" name="chatlink" id="chatlink" value="[&AgHhdwAA=]">
<div id="output">Output</div>

<script>
$(document).ready(function(){
});

$("#chatlink").on('change click keyup', function(){
//	console.log(VtoC($(this).val()));
	var dataset = 6;
	var binnum = "";
	var decnum = "";
	var bindata = new Array(dataset);
	var decdata = new Array(dataset);
	for (var i = 0; i < $(this).val().length; i++) {
		var nowchar = CtoV($(this).val().substr(i,1));
		if (nowchar >= 0) {
//			console.log(padleft(parseInt(nowchar).toString(2),6));
			binnum += padleft(parseInt(nowchar).toString(2),6);
			decnum += nowchar.toString();
		}
	}
//	console.log(binnum);
	for (var j = 0; j < dataset; j++) {
		bindata[j] = binnum.substr(j*8, 8);
		decdata[j] = parseInt(bindata[j], 2);
		console.log(decdata[j]);
	}
//	console.log(decnum);
});

function CtoV (input) {
	switch (input) {
		case 'A': return '0';	break; case 'B': return '1';	break; case 'C': return '2';	break;
		case 'D': return '3';	break; case 'E': return '4';	break; case 'F': return '5';	break;
		case 'G': return '6';	break; case 'H': return '7';	break; case 'I': return '8';	break;
		case 'J': return '9';	break; case 'K': return '10';	break; case 'L': return '11';	break;
		case 'M': return '12';	break; case 'N': return '13';	break; case 'O': return '14';	break;
		case 'P': return '15';	break; case 'Q': return '16';	break; case 'R': return '17';	break;
		case 'S': return '18';	break; case 'T': return '19';	break; case 'U': return '20';	break;
		case 'V': return '21';	break; case 'W': return '22';	break; case 'X': return '23';	break;
		case 'Y': return '24';	break; case 'Z': return '25';	break; case 'a': return '26';	break;
		case 'b': return '27';	break; case 'c': return '28';	break; case 'd': return '29';	break;
		case 'e': return '30';	break; case 'f': return '31';	break; case 'g': return '32';	break;
		case 'h': return '33';	break; case 'i': return '34';	break; case 'j': return '35';	break;
		case 'k': return '36';	break; case 'l': return '37';	break; case 'm': return '38';	break;
		case 'n': return '39';	break; case 'o': return '40';	break; case 'p': return '41';	break;
		case 'q': return '42';	break; case 'r': return '43';	break; case 's': return '44';	break;
		case 't': return '45';	break; case 'u': return '46';	break; case 'v': return '47';	break;
		case 'w': return '48';	break; case 'x': return '49';	break; case 'y': return '50';	break;
		case 'z': return '51';	break; case '0': return '52';	break; case '1': return '53';	break;
		case '2': return '54';	break; case '3': return '55';	break; case '4': return '56';	break;
		case '5': return '57';	break; case '6': return '58';	break; case '7': return '59';	break;
		case '8': return '60';	break; case '9': return '61';	break; case '+': return '62';	break;
		case '/': return '63';	break;
		default: return -1;
	}
}

function VtoC (input) {
	switch (input) {
		case '0': return 'A';	break; case '1': return 'B';	break; case '2': return 'C';	break;
		case '3': return 'D';	break; case '4': return 'E';	break; case '5': return 'F';	break;
		case '6': return 'G';	break; case '7': return 'H';	break; case '8': return 'I';	break;
		case '9': return 'J';	break; case '10': return 'K';	break; case '11': return 'L';	break;
		case '12': return 'M';	break; case '13': return 'N';	break; case '14': return 'O';	break;
		case '15': return 'P';	break; case '16': return 'Q';	break; case '17': return 'R';	break;
		case '18': return 'S';	break; case '19': return 'T';	break; case '20': return 'U';	break;
		case '21': return 'V';	break; case '22': return 'W';	break; case '23': return 'X';	break;
		case '24': return 'Y';	break; case '25': return 'Z';	break; case '26': return 'a';	break;
		case '27': return 'b';	break; case '28': return 'c';	break; case '29': return 'd';	break;
		case '30': return 'e';	break; case '31': return 'f';	break; case '32': return 'g';	break;
		case '33': return 'h';	break; case '34': return 'i';	break; case '35': return 'j';	break;
		case '36': return 'k';	break; case '37': return 'l';	break; case '38': return 'm';	break;
		case '39': return 'n';	break; case '40': return 'o';	break; case '41': return 'p';	break;
		case '42': return 'q';	break; case '43': return 'r';	break; case '44': return 's';	break;
		case '45': return 't';	break; case '46': return 'u';	break; case '47': return 'v';	break;
		case '48': return 'w';	break; case '49': return 'x';	break; case '50': return 'y';	break;
		case '51': return 'z';	break; case '52': return '0';	break; case '53': return '1';	break;
		case '54': return '2';	break; case '55': return '3';	break; case '56': return '4';	break;
		case '57': return '5';	break; case '58': return '6';	break; case '59': return '7';	break;
		case '60': return '8';	break; case '61': return '9';	break; case '62': return '+';	break;
		case '63': return '/';	break;
		default: return -1;
	}
}

function padleft (YourNumber, OutputLength){
    if (YourNumber.length >= OutputLength) {
        return YourNumber;
    } else {
        return padleft("0" +YourNumber, OutputLength);
    }
}

</script>
</body>
</html>
